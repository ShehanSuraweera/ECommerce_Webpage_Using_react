{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport { BASE_URL } from \"../utils/apiURL\";\nimport { STATUS } from \"../utils/status\";\nconst cat = [\"smartphones\", \"laptops\", \"fragrances\", \"skincare\", \"groceries\", \"home-decoration\", \"furniture\", \"tops\", \"womens-dresses\", \"womens-shoes\", \"mens-shirts\", \"mens-shoes\", \"mens-watches\", \"womens-watches\", \"womens-bags\", \"womens-jewellery\", \"sunglasses\", \"automotive\", \"motorcycle\", \"lighting\"];\nconst productSlice = createSlice({\n  name: \"product\",\n  initialState: {\n    data: [],\n    status: STATUS.IDLE\n  },\n  reducers: {\n    setProducts(state, action) {\n      state.data = action.payload;\n    },\n\n    setStatus(state, action) {\n      state.status = action.payload;\n    }\n\n  }\n});\nexport const {\n  setProducts,\n  setStatus\n} = productSlice.actions;\nexport default productSlice.reducer;\nexport const fetchProducts = (page, limit) => {\n  return async function fetchProductThunk(dispatch) {\n    dispatch(setStatus(STATUS.LOADING));\n\n    try {\n      const skip = (page - 1) * limit;\n      const response = await fetch(`${BASE_URL}products?skip=${skip}&limit=${limit}`);\n      const data0 = await response.json();\n      const data = data0.products;\n\n      for (let i = 0; i < data.length; i++) {\n        const id = cat.indexOf(data[i].category);\n        const name = data[i].category;\n        const image = \"null\";\n        data[i].category = {\n          \"id\": id,\n          \"name\": name,\n          \"image\": image\n        };\n      }\n\n      dispatch(setProducts(data));\n      dispatch(setStatus(STATUS.IDLE));\n    } catch (error) {\n      dispatch(setStatus(STATUS.ERROR));\n    }\n  };\n};","map":{"version":3,"names":["createSlice","BASE_URL","STATUS","cat","productSlice","name","initialState","data","status","IDLE","reducers","setProducts","state","action","payload","setStatus","actions","reducer","fetchProducts","page","limit","fetchProductThunk","dispatch","LOADING","skip","response","fetch","data0","json","products","i","length","id","indexOf","category","image","error","ERROR"],"sources":["D:/0020-UOKcs/Year 1/Semester 2/CSCI 12063 - Web Programming/pinsara/Ecommerce-react-Webapp/src/store/productSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { BASE_URL } from \"../utils/apiURL\";\r\nimport { STATUS } from \"../utils/status\";\r\n\r\nconst cat = [\r\n    \"smartphones\",\r\n    \"laptops\",\r\n    \"fragrances\",\r\n    \"skincare\",\r\n    \"groceries\",\r\n    \"home-decoration\",\r\n    \"furniture\",\r\n    \"tops\",\r\n    \"womens-dresses\",\r\n    \"womens-shoes\",\r\n    \"mens-shirts\",\r\n    \"mens-shoes\",\r\n    \"mens-watches\",\r\n    \"womens-watches\",\r\n    \"womens-bags\",\r\n    \"womens-jewellery\",\r\n    \"sunglasses\",\r\n    \"automotive\",\r\n    \"motorcycle\",\r\n    \"lighting\",\r\n  ];\r\n  \r\n\r\nconst productSlice = createSlice({\r\n    name: \"product\",\r\n    initialState: {\r\n        data: [],\r\n        status: STATUS.IDLE,\r\n    },\r\n\r\n    reducers: {\r\n        setProducts(state, action){\r\n            state.data = action.payload;\r\n        },\r\n        setStatus(state, action){\r\n            state.status = action.payload;\r\n        },\r\n    },\r\n});\r\n\r\nexport const {setProducts, setStatus} = productSlice.actions;\r\nexport default productSlice.reducer;\r\n\r\nexport const fetchProducts = (page,limit) => {\r\n    return async function fetchProductThunk(dispatch){\r\n        dispatch(setStatus(STATUS.LOADING));\r\n        try{\r\n            const skip = (page - 1) * limit;\r\n            const response = await fetch(`${BASE_URL}products?skip=${skip}&limit=${limit}`);\r\n            const data0 = await response.json();\r\n            const data = data0.products;\r\n\r\n            for (let i = 0; i < data.length; i++) {\r\n                const id = cat.indexOf(data[i].category);\r\n                const name = data[i].category;\r\n                const image = \"null\";\r\n            \r\n                data[i].category = {\"id\":id,\"name\":name,\"image\":image};\r\n              }\r\n\r\n            dispatch(setProducts(data));\r\n            dispatch(setStatus(STATUS.IDLE));\r\n        } catch(error){\r\n            dispatch(setStatus(STATUS.ERROR));\r\n        }\r\n    }\r\n}\r\n"],"mappings":"AAAA,SAASA,WAAT,QAA4B,kBAA5B;AACA,SAASC,QAAT,QAAyB,iBAAzB;AACA,SAASC,MAAT,QAAuB,iBAAvB;AAEA,MAAMC,GAAG,GAAG,CACR,aADQ,EAER,SAFQ,EAGR,YAHQ,EAIR,UAJQ,EAKR,WALQ,EAMR,iBANQ,EAOR,WAPQ,EAQR,MARQ,EASR,gBATQ,EAUR,cAVQ,EAWR,aAXQ,EAYR,YAZQ,EAaR,cAbQ,EAcR,gBAdQ,EAeR,aAfQ,EAgBR,kBAhBQ,EAiBR,YAjBQ,EAkBR,YAlBQ,EAmBR,YAnBQ,EAoBR,UApBQ,CAAZ;AAwBA,MAAMC,YAAY,GAAGJ,WAAW,CAAC;EAC7BK,IAAI,EAAE,SADuB;EAE7BC,YAAY,EAAE;IACVC,IAAI,EAAE,EADI;IAEVC,MAAM,EAAEN,MAAM,CAACO;EAFL,CAFe;EAO7BC,QAAQ,EAAE;IACNC,WAAW,CAACC,KAAD,EAAQC,MAAR,EAAe;MACtBD,KAAK,CAACL,IAAN,GAAaM,MAAM,CAACC,OAApB;IACH,CAHK;;IAINC,SAAS,CAACH,KAAD,EAAQC,MAAR,EAAe;MACpBD,KAAK,CAACJ,MAAN,GAAeK,MAAM,CAACC,OAAtB;IACH;;EANK;AAPmB,CAAD,CAAhC;AAiBA,OAAO,MAAM;EAACH,WAAD;EAAcI;AAAd,IAA2BX,YAAY,CAACY,OAA9C;AACP,eAAeZ,YAAY,CAACa,OAA5B;AAEA,OAAO,MAAMC,aAAa,GAAG,CAACC,IAAD,EAAMC,KAAN,KAAgB;EACzC,OAAO,eAAeC,iBAAf,CAAiCC,QAAjC,EAA0C;IAC7CA,QAAQ,CAACP,SAAS,CAACb,MAAM,CAACqB,OAAR,CAAV,CAAR;;IACA,IAAG;MACC,MAAMC,IAAI,GAAG,CAACL,IAAI,GAAG,CAAR,IAAaC,KAA1B;MACA,MAAMK,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEzB,QAAS,iBAAgBuB,IAAK,UAASJ,KAAM,EAAjD,CAA5B;MACA,MAAMO,KAAK,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAApB;MACA,MAAMrB,IAAI,GAAGoB,KAAK,CAACE,QAAnB;;MAEA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGvB,IAAI,CAACwB,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;QAClC,MAAME,EAAE,GAAG7B,GAAG,CAAC8B,OAAJ,CAAY1B,IAAI,CAACuB,CAAD,CAAJ,CAAQI,QAApB,CAAX;QACA,MAAM7B,IAAI,GAAGE,IAAI,CAACuB,CAAD,CAAJ,CAAQI,QAArB;QACA,MAAMC,KAAK,GAAG,MAAd;QAEA5B,IAAI,CAACuB,CAAD,CAAJ,CAAQI,QAAR,GAAmB;UAAC,MAAKF,EAAN;UAAS,QAAO3B,IAAhB;UAAqB,SAAQ8B;QAA7B,CAAnB;MACD;;MAEHb,QAAQ,CAACX,WAAW,CAACJ,IAAD,CAAZ,CAAR;MACAe,QAAQ,CAACP,SAAS,CAACb,MAAM,CAACO,IAAR,CAAV,CAAR;IACH,CAhBD,CAgBE,OAAM2B,KAAN,EAAY;MACVd,QAAQ,CAACP,SAAS,CAACb,MAAM,CAACmC,KAAR,CAAV,CAAR;IACH;EACJ,CArBD;AAsBH,CAvBM"},"metadata":{},"sourceType":"module"}