{"ast":null,"code":"import _objectSpread from\"D:/0020-UOKcs/Year 1/Semester 2/CSCI 12063 - Web Programming/ECommerce_Webpage_Using_react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createSlice}from\"@reduxjs/toolkit\";var fetchFromLocalStorage=function fetchFromLocalStorage(){var cart=localStorage.getItem('cart');if(cart){return JSON.parse(localStorage.getItem('cart'));}else{return[];}};var storeInLocalStorage=function storeInLocalStorage(data){localStorage.setItem('cart',JSON.stringify(data));};var cartSlice=createSlice({name:'cart',initialState:{data:fetchFromLocalStorage(),totalItems:0,totalAmount:0,deliveryCharge:1000},reducers:{addToCart:function addToCart(state,action){var tempItem=state.data.find(function(item){return item.id===action.payload.id;});if(tempItem){var tempCart=state.data.map(function(item){if(item.id===action.payload.id){var newQty=item.quantity+action.payload.quantity;var newTotalPrice=newQty*item.price;return _objectSpread(_objectSpread({},item),{},{quantity:newQty,totalPrice:newTotalPrice});}else{return item;}});state.data=tempCart;storeInLocalStorage(state.data);}else{state.data.push(action.payload);storeInLocalStorage(state.data);}},removeFromCart:function removeFromCart(state,action){var tempCart=state.data.filter(function(item){return item.id!==action.payload;});state.data=tempCart;storeInLocalStorage(state.data);},clearCart:function clearCart(state){state.data=[];storeInLocalStorage(state.data);},toggleCartQty:function toggleCartQty(state,action){var tempCart=state.data.map(function(item){if(item.id===action.payload.id){var tempQty=item.quantity;var tempTotalPrice=item.totalPrice;if(action.payload.type===\"INC\"){tempQty++;tempTotalPrice=tempQty*item.price;}if(action.payload.type===\"DEC\"){tempQty--;if(tempQty<1)tempQty=1;tempTotalPrice=tempQty*item.price;}return _objectSpread(_objectSpread({},item),{},{quantity:tempQty,totalPrice:tempTotalPrice});}else{return item;}});state.data=tempCart;storeInLocalStorage(state.data);},// Recalculate totalAmount and totalItems\ngetCartTotal:function getCartTotal(state){state.totalAmount=state.data.reduce(function(cartTotal,cartItem){return cartTotal+=cartItem.totalPrice;},0);state.totalItems=state.data.length;}}});var _cartSlice$actions=cartSlice.actions,addToCart=_cartSlice$actions.addToCart,removeFromCart=_cartSlice$actions.removeFromCart,toggleCartQty=_cartSlice$actions.toggleCartQty,getCartTotal=_cartSlice$actions.getCartTotal,clearCart=_cartSlice$actions.clearCart,setCartTotal=_cartSlice$actions.setCartTotal;export{addToCart,removeFromCart,toggleCartQty,getCartTotal,clearCart,setCartTotal};export default cartSlice.reducer;","map":{"version":3,"names":["createSlice","fetchFromLocalStorage","cart","localStorage","getItem","JSON","parse","storeInLocalStorage","data","setItem","stringify","cartSlice","name","initialState","totalItems","totalAmount","deliveryCharge","reducers","addToCart","state","action","tempItem","find","item","id","payload","tempCart","map","newQty","quantity","newTotalPrice","price","totalPrice","push","removeFromCart","filter","clearCart","toggleCartQty","tempQty","tempTotalPrice","type","getCartTotal","reduce","cartTotal","cartItem","length","actions","setCartTotal","reducer"],"sources":["D:/0020-UOKcs/Year 1/Semester 2/CSCI 12063 - Web Programming/ECommerce_Webpage_Using_react/src/store/cartSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst fetchFromLocalStorage = () => {\r\n    let cart = localStorage.getItem('cart');\r\n    if(cart){\r\n        return JSON.parse(localStorage.getItem('cart'))\r\n    } else {\r\n        return [];\r\n    }\r\n}\r\n\r\nconst storeInLocalStorage = (data) => {\r\n    localStorage.setItem('cart', JSON.stringify(data))\r\n}\r\n\r\nconst cartSlice = createSlice({\r\n    name: 'cart',\r\n    initialState: {\r\n        data: fetchFromLocalStorage(),\r\n        totalItems: 0,\r\n        totalAmount: 0,\r\n        deliveryCharge: 1000\r\n    }, \r\n    reducers: {\r\n        addToCart(state, action){\r\n            const tempItem = state.data.find(item => item.id === action.payload.id);\r\n            if(tempItem){\r\n                const tempCart = state.data.map(item => {\r\n                    if(item.id === action.payload.id){\r\n                        let newQty = item.quantity + action.payload.quantity;\r\n                        let newTotalPrice = newQty * item.price;\r\n                        return { ...item, quantity: newQty, totalPrice: newTotalPrice };\r\n                    } else {\r\n                        return item;\r\n                    }\r\n                });\r\n                state.data = tempCart;\r\n                storeInLocalStorage(state.data);\r\n            } else {\r\n                state.data.push(action.payload);\r\n                storeInLocalStorage(state.data);\r\n            }\r\n        },\r\n        removeFromCart(state, action){\r\n            const tempCart = state.data.filter(item => item.id !== action.payload);\r\n            state.data = tempCart;\r\n            storeInLocalStorage(state.data);\r\n        },\r\n        clearCart(state){\r\n            state.data = [];\r\n            storeInLocalStorage(state.data);\r\n        },\r\n        toggleCartQty(state, action){\r\n            const tempCart = state.data.map(item => {\r\n                if(item.id === action.payload.id){\r\n                    let tempQty = item.quantity;\r\n                    let tempTotalPrice = item.totalPrice;\r\n                    if(action.payload.type === \"INC\"){\r\n                        tempQty++;\r\n                        tempTotalPrice = tempQty * item.price;\r\n                    }\r\n                    if(action.payload.type === \"DEC\"){\r\n                        tempQty--;\r\n                        if(tempQty < 1) tempQty = 1;\r\n                        tempTotalPrice = tempQty * item.price;\r\n                    }\r\n                    return {...item, quantity: tempQty, totalPrice: tempTotalPrice};\r\n                } else {\r\n                    return item;\r\n                }\r\n            });\r\n            state.data = tempCart;\r\n            storeInLocalStorage(state.data);\r\n        },\r\n        \r\n         // Recalculate totalAmount and totalItems\r\n         \r\n        \r\n        getCartTotal(state){\r\n            state.totalAmount = state.data.reduce((cartTotal, cartItem) => {\r\n                return cartTotal += cartItem.totalPrice;\r\n            }, 0);\r\n            state.totalItems = state.data.length;\r\n        }\r\n    }\r\n});\r\n\r\nexport const {addToCart, removeFromCart, toggleCartQty, getCartTotal, clearCart,setCartTotal,} = cartSlice.actions;\r\nexport default cartSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}