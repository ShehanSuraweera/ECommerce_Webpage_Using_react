{"ast":null,"code":"import _regeneratorRuntime from\"D:/0020-UOKcs/Year 1/Semester 2/CSCI 12063 - Web Programming/Single page webApp Using React/ECommerce_Webpage_Using_react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/0020-UOKcs/Year 1/Semester 2/CSCI 12063 - Web Programming/Single page webApp Using React/ECommerce_Webpage_Using_react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice}from\"@reduxjs/toolkit\";import{BASE_URL}from\"../utils/apiURL\";import{STATUS}from\"../utils/status\";var cat=[\"smartphones\",\"laptops\",\"fragrances\",\"skincare\",\"groceries\",\"home-decoration\",\"furniture\",\"tops\",\"womens-dresses\",\"womens-shoes\",\"mens-shirts\",\"mens-shoes\",\"mens-watches\",\"womens-watches\",\"womens-bags\",\"womens-jewellery\",\"sunglasses\",\"automotive\",\"motorcycle\",\"lighting\"];var productSlice=createSlice({name:\"product\",initialState:{data:[],status:STATUS.IDLE},reducers:{setProducts:function setProducts(state,action){state.data=action.payload;},setStatus:function setStatus(state,action){state.status=action.payload;}}});var _productSlice$actions=productSlice.actions,setProducts=_productSlice$actions.setProducts,setStatus=_productSlice$actions.setStatus;export{setProducts,setStatus};export default productSlice.reducer;export var fetchProducts=function fetchProducts(page,limit){return/*#__PURE__*/function(){var _fetchProductThunk=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var skip,response,data0,data,i,id,name,image;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(setStatus(STATUS.LOADING));_context.prev=1;skip=(page-1)*limit;_context.next=5;return fetch(\"\".concat(BASE_URL,\"products?skip=\").concat(skip,\"&limit=\").concat(limit));case 5:response=_context.sent;_context.next=8;return response.json();case 8:data0=_context.sent;data=data0.products;for(i=0;i<data.length;i++){id=cat.indexOf(data[i].category);name=data[i].category;image=\"null\";data[i].category={\"id\":id,\"name\":name,\"image\":image};}dispatch(setProducts(data));dispatch(setStatus(STATUS.IDLE));_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](1);dispatch(setStatus(STATUS.ERROR));case 18:case\"end\":return _context.stop();}}},_callee,null,[[1,15]]);}));function fetchProductThunk(_x){return _fetchProductThunk.apply(this,arguments);}return fetchProductThunk;}();};","map":{"version":3,"names":["createSlice","BASE_URL","STATUS","cat","productSlice","name","initialState","data","status","IDLE","reducers","setProducts","state","action","payload","setStatus","actions","reducer","fetchProducts","page","limit","dispatch","LOADING","skip","fetch","response","json","data0","products","i","length","id","indexOf","category","image","ERROR","fetchProductThunk"],"sources":["D:/0020-UOKcs/Year 1/Semester 2/CSCI 12063 - Web Programming/Single page webApp Using React/ECommerce_Webpage_Using_react/src/store/productSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { BASE_URL } from \"../utils/apiURL\";\r\nimport { STATUS } from \"../utils/status\";\r\n\r\nconst cat = [\r\n    \"smartphones\",\r\n    \"laptops\",\r\n    \"fragrances\",\r\n    \"skincare\",\r\n    \"groceries\",\r\n    \"home-decoration\",\r\n    \"furniture\",\r\n    \"tops\",\r\n    \"womens-dresses\",\r\n    \"womens-shoes\",\r\n    \"mens-shirts\",\r\n    \"mens-shoes\",\r\n    \"mens-watches\",\r\n    \"womens-watches\",\r\n    \"womens-bags\",\r\n    \"womens-jewellery\",\r\n    \"sunglasses\",\r\n    \"automotive\",\r\n    \"motorcycle\",\r\n    \"lighting\",\r\n  ];\r\n  \r\n\r\nconst productSlice = createSlice({\r\n    name: \"product\",\r\n    initialState: {\r\n        data: [],\r\n        status: STATUS.IDLE,\r\n    },\r\n\r\n    reducers: {\r\n        setProducts(state, action){\r\n            state.data = action.payload;\r\n        },\r\n        setStatus(state, action){\r\n            state.status = action.payload;\r\n        },\r\n    },\r\n});\r\n\r\nexport const {setProducts, setStatus} = productSlice.actions;\r\nexport default productSlice.reducer;\r\n\r\nexport const fetchProducts = (page,limit) => {\r\n    return async function fetchProductThunk(dispatch){\r\n        dispatch(setStatus(STATUS.LOADING));\r\n        try{\r\n            const skip = (page - 1) * limit;\r\n            const response = await fetch(`${BASE_URL}products?skip=${skip}&limit=${limit}`);\r\n            const data0 = await response.json();\r\n            const data = data0.products;\r\n\r\n            for (let i = 0; i < data.length; i++) {\r\n                const id = cat.indexOf(data[i].category);\r\n                const name = data[i].category;\r\n                const image = \"null\";\r\n            \r\n                data[i].category = {\"id\":id,\"name\":name,\"image\":image};\r\n              }\r\n\r\n            dispatch(setProducts(data));\r\n            dispatch(setStatus(STATUS.IDLE));\r\n        } catch(error){\r\n            dispatch(setStatus(STATUS.ERROR));\r\n        }\r\n    }\r\n}\r\n"],"mappings":"8aAAA,OAASA,WAAT,KAA4B,kBAA5B,CACA,OAASC,QAAT,KAAyB,iBAAzB,CACA,OAASC,MAAT,KAAuB,iBAAvB,CAEA,GAAMC,IAAG,CAAG,CACR,aADQ,CAER,SAFQ,CAGR,YAHQ,CAIR,UAJQ,CAKR,WALQ,CAMR,iBANQ,CAOR,WAPQ,CAQR,MARQ,CASR,gBATQ,CAUR,cAVQ,CAWR,aAXQ,CAYR,YAZQ,CAaR,cAbQ,CAcR,gBAdQ,CAeR,aAfQ,CAgBR,kBAhBQ,CAiBR,YAjBQ,CAkBR,YAlBQ,CAmBR,YAnBQ,CAoBR,UApBQ,CAAZ,CAwBA,GAAMC,aAAY,CAAGJ,WAAW,CAAC,CAC7BK,IAAI,CAAE,SADuB,CAE7BC,YAAY,CAAE,CACVC,IAAI,CAAE,EADI,CAEVC,MAAM,CAAEN,MAAM,CAACO,IAFL,CAFe,CAO7BC,QAAQ,CAAE,CACNC,WADM,sBACMC,KADN,CACaC,MADb,CACoB,CACtBD,KAAK,CAACL,IAAN,CAAaM,MAAM,CAACC,OAApB,CACH,CAHK,CAINC,SAJM,oBAIIH,KAJJ,CAIWC,MAJX,CAIkB,CACpBD,KAAK,CAACJ,MAAN,CAAeK,MAAM,CAACC,OAAtB,CACH,CANK,CAPmB,CAAD,CAAhC,CAiBO,0BAAiCV,YAAY,CAACY,OAA9C,CAAOL,WAAP,uBAAOA,WAAP,CAAoBI,SAApB,uBAAoBA,SAApB,C,8BACP,cAAeX,aAAY,CAACa,OAA5B,CAEA,MAAO,IAAMC,cAAa,CAAG,QAAhBA,cAAgB,CAACC,IAAD,CAAMC,KAAN,CAAgB,CACzC,+GAAO,iBAAiCC,QAAjC,iKACHA,QAAQ,CAACN,SAAS,CAACb,MAAM,CAACoB,OAAR,CAAV,CAAR,CADG,gBAGOC,IAHP,CAGc,CAACJ,IAAI,CAAG,CAAR,EAAaC,KAH3B,uBAIwBI,MAAK,WAAIvB,QAAJ,0BAA6BsB,IAA7B,mBAA2CH,KAA3C,EAJ7B,QAIOK,QAJP,qCAKqBA,SAAQ,CAACC,IAAT,EALrB,QAKOC,KALP,eAMOpB,IANP,CAMcoB,KAAK,CAACC,QANpB,CAQC,IAASC,CAAT,CAAa,CAAb,CAAgBA,CAAC,CAAGtB,IAAI,CAACuB,MAAzB,CAAiCD,CAAC,EAAlC,CAAsC,CAC5BE,EAD4B,CACvB5B,GAAG,CAAC6B,OAAJ,CAAYzB,IAAI,CAACsB,CAAD,CAAJ,CAAQI,QAApB,CADuB,CAE5B5B,IAF4B,CAErBE,IAAI,CAACsB,CAAD,CAAJ,CAAQI,QAFa,CAG5BC,KAH4B,CAGpB,MAHoB,CAKlC3B,IAAI,CAACsB,CAAD,CAAJ,CAAQI,QAAR,CAAmB,CAAC,KAAKF,EAAN,CAAS,OAAO1B,IAAhB,CAAqB,QAAQ6B,KAA7B,CAAnB,CACD,CAEHb,QAAQ,CAACV,WAAW,CAACJ,IAAD,CAAZ,CAAR,CACAc,QAAQ,CAACN,SAAS,CAACb,MAAM,CAACO,IAAR,CAAV,CAAR,CAjBD,iFAmBCY,QAAQ,CAACN,SAAS,CAACb,MAAM,CAACiC,KAAR,CAAV,CAAR,CAnBD,qEAAP,WAAsBC,kBAAtB,4DAAsBA,kBAAtB,KAsBH,CAvBM"},"metadata":{},"sourceType":"module"}